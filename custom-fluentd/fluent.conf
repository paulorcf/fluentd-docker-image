<source>
  @type tail
  path /var/log/un/scrapy.log #...or where you placed your Apache access log
  pos_file /var/log/un/scrapy.log.pos # This is where you record file position
  tag un.json #fluentd tag!
  format json # one JSON per line
</source>

<!-- https://docs.fluentd.org/v0.12/articles/out_kafka -->
<match **>
  @type kafka_buffered

  # list of seed brokers9092
  brokers 0.0.0.0:9092

  # buffer settings
  buffer_type file
  buffer_path /var/log/td-agent/buffer/td
  flush_interval 3s

  # topic settings
  default_topic messages

  # data type settirngs
  output_data_type json
  compression_codec gzip

  # producer settings
  max_send_retries 1
  required_acks -1
</match>
